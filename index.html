<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="theme-color"
      media="(prefers-color-scheme: light)"
      content="#f1f1f1"
    />
    <meta
      name="theme-color"
      media="(prefers-color-scheme: dark)"
      content="#1a1a1d"
    />
    <title>Prashant Giri</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <style>
      /* CSS remains identical to the previous "Subtle Light Sweep" version */
      :root {
        /* Default: Dark Mode */
        --bg-color: #1a1a1d;
        --card-bg-color: rgba(35, 35, 40, 0.75);
        --text-color: #e0e0e0;
        --text-muted-color: #a0a0a0;
        --accent-color: #c3a1ff;
        --accent-color-rgb: 195, 161, 255;
        --accent-hover-bg: #7a42f4;
        --border-color: rgba(255, 255, 255, 0.1);
        --shadow-color: rgba(0, 0, 0, 0.5);
        --scrollbar-thumb: var(--accent-hover-bg);
        --scrollbar-track: #2a2a2e;
        --button-bg: rgba(40, 40, 45, 0.85);
        --button-hover-bg: rgba(60, 60, 65, 0.9);
        --button-border: rgba(255, 255, 255, 0.1);
        --button-shadow: rgba(0, 0, 0, 0.3);
        --icon-color: #a0a0a0;
        --icon-hover-color: var(--accent-color);
        --now-playing-bg: rgba(30, 30, 35, 0.85);
        --now-playing-border: rgba(255, 255, 255, 0.08);
        --now-playing-shadow: rgba(0, 0, 0, 0.4);

        --theme-transition-duration: 0.4s;
      }

      html.light-mode {
        /* Light Mode Overrides */
        --bg-color: #f4f4f8;
        --card-bg-color: rgba(255, 255, 255, 0.8);
        --text-color: #333333;
        --text-muted-color: #666666;
        --accent-color: #7a42f4;
        --accent-color-rgb: 122, 66, 244;
        --accent-hover-bg: #6a32e4;
        --border-color: rgba(0, 0, 0, 0.1);
        --shadow-color: rgba(100, 100, 120, 0.2);
        --scrollbar-thumb: var(--accent-hover-bg);
        --scrollbar-track: #e0e0e0;
        --button-bg: rgba(230, 230, 235, 0.9);
        --button-hover-bg: rgba(215, 215, 225, 1);
        --button-border: rgba(0, 0, 0, 0.15);
        --button-shadow: rgba(100, 100, 120, 0.15);
        --icon-color: #777777;
        --icon-hover-color: var(--accent-color);
        --now-playing-bg: rgba(245, 245, 248, 0.9);
        --now-playing-border: rgba(0, 0, 0, 0.1);
        --now-playing-shadow: rgba(100, 100, 120, 0.15);
      }

      *,
      *::before,
      *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      html,
      body {
        height: 100%;
        width: 100%;
        overflow: hidden;
      }
      body {
        font-family: "Poppins", sans-serif;
        background-color: var(--bg-color);
        color: var(--text-color);
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        text-align: center;
        position: relative;
        transition: background-color var(--theme-transition-duration) ease,
          color var(--theme-transition-duration) ease;
      }
      #particle-canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        opacity: 0;
        animation: fadeInCanvas 2s ease-out forwards;
        animation-delay: 0.5s;
      }
      @keyframes fadeInCanvas {
        to {
          opacity: 1;
        }
      }
      .container {
        max-width: 900px;
        width: 90%;
        padding: 30px 40px;
        background: var(--card-bg-color);
        backdrop-filter: blur(12px);
        border-radius: 15px;
        z-index: 1;
        opacity: 0;
        transform: translateY(20px);
        animation: fadeInUpContent 1s ease-out forwards;
        animation-delay: 0.7s;
        box-shadow: 0 10px 35px var(--shadow-color);
        border: 1px solid var(--border-color);
        max-height: 90vh;
        overflow-y: auto;
        scrollbar-width: thin;
        scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
        transition: background-color var(--theme-transition-duration) ease,
          border-color var(--theme-transition-duration) ease,
          box-shadow var(--theme-transition-duration) ease;
      }
      .container::-webkit-scrollbar {
        width: 8px;
      }
      .container::-webkit-scrollbar-track {
        background: var(--scrollbar-track);
        border-radius: 4px;
        transition: background-color var(--theme-transition-duration) ease;
      }
      .container::-webkit-scrollbar-thumb {
        background-color: var(--scrollbar-thumb);
        border-radius: 4px;
        border: 2px solid var(--scrollbar-track);
        transition: background-color var(--theme-transition-duration) ease;
      }
      .container::-webkit-scrollbar-thumb:hover {
        background-color: var(--accent-color);
      }
      @keyframes fadeInUpContent {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      h1 {
        font-size: 2.8rem;
        font-weight: 600;
        margin-bottom: 15px;
        color: var(--accent-color);
        letter-spacing: 1px;
        transition: color var(--theme-transition-duration) ease;
      }
      h2.section-title {
        font-size: 1.4rem;
        font-weight: 400;
        color: var(--text-color);
        margin-top: 40px;
        margin-bottom: 20px;
        letter-spacing: 0.5px;
        position: relative;
        display: inline-block;
        padding-bottom: 5px;
        transition: color var(--theme-transition-duration) ease;
      }
      h2.section-title::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 50px;
        height: 2px;
        background-color: var(--accent-color);
        opacity: 0.6;
        border-radius: 1px;
        transition: background-color var(--theme-transition-duration) ease;
      }
      p.intro {
        font-size: 1.1rem;
        line-height: 1.7;
        color: var(--text-muted-color);
        margin-bottom: 30px;
        max-width: 650px;
        margin-left: auto;
        margin-right: auto;
        transition: color var(--theme-transition-duration) ease;
      }

      /* --- Navigation / Links (Using Subtle Light Sweep) --- */
      .link-section {
        display: flex;
        justify-content: center;
        gap: 20px;
        flex-wrap: wrap;
        margin-bottom: 30px;
      }
      .nav-item {
        background-color: var(--button-bg);
        padding: 14px 24px;
        border-radius: 10px;
        text-decoration: none;
        color: var(--text-muted-color);
        font-weight: 400;
        font-size: 0.95rem;
        border: 1px solid var(--button-border);
        box-shadow: 0 1px 3px var(--button-shadow),
          inset 0 1px 2px rgba(255, 255, 255, 0.05);
        display: inline-flex;
        align-items: center;
        gap: 10px;
        position: relative;
        z-index: 1;
        overflow: hidden;
        transition: color 0.6s cubic-bezier(0.23, 1, 0.32, 1),
          background-color 0.5s cubic-bezier(0.4, 0, 0.2, 1),
          transform 0.5s cubic-bezier(0.23, 1, 0.32, 1),
          box-shadow 0.5s cubic-bezier(0.23, 1, 0.32, 1),
          border-color 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        opacity: 0;
        transform: translateY(15px);
        animation: fadeInUpItem 0.5s ease-out forwards;
        animation-fill-mode: both;
      }
      @keyframes fadeInUpItem {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .nav-item::before {
        content: "";
        position: absolute;
        top: -10%;
        left: -150%;
        width: 80%;
        height: 120%;
        background: linear-gradient(
          90deg,
          rgba(var(--accent-color-rgb), 0) 0%,
          rgba(var(--accent-color-rgb), 0.15) 50%,
          rgba(var(--accent-color-rgb), 0) 100%
        );
        transform: skewX(-25deg);
        mix-blend-mode: overlay;
        transition: left 0.7s cubic-bezier(0.23, 1, 0.32, 1);
        z-index: 0;
        opacity: 0.8;
      }
      .nav-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 15px var(--button-shadow);
        color: var(--text-color);
        border-color: rgba(var(--accent-color-rgb), 0.2);
      }
      .nav-item:hover::before {
        left: 150%;
      }
      .nav-item i {
        display: inline-block;
        color: var(--icon-color);
        margin-right: 8px;
        transition: transform 0.8s cubic-bezier(0.16, 1, 0.3, 1),
          color 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      }
      .nav-item:hover i {
        transform: rotate(-8deg);
        color: var(--icon-hover-color);
      }
      .resume-button {
        background-color: rgba(var(--accent-color-rgb), 0.1);
        border-color: rgba(var(--accent-color-rgb), 0.3);
        color: var(--accent-color);
      }
      .resume-button i {
        color: var(--accent-color);
      }
      .resume-button:hover {
        background-color: var(--accent-hover-bg);
        color: #ffffff;
        border-color: rgba(var(--accent-color-rgb), 0.5);
        box-shadow: 0 6px 15px rgba(var(--accent-color-rgb), 0.25);
      }
      .resume-button::before {
        background: linear-gradient(
          90deg,
          rgba(255, 255, 255, 0) 0%,
          rgba(255, 255, 255, 0.15) 50%,
          rgba(255, 255, 255, 0) 100%
        );
        mix-blend-mode: overlay; /* Use overlay or screen */
      }
      .resume-button:hover i {
        color: #ffffff;
      }

      /* --- Social Links --- */
      .socials {
        margin-top: 35px;
        display: flex;
        justify-content: center;
        gap: 30px;
      }
      .social-link {
        color: var(--text-muted-color);
        text-decoration: none;
        display: inline-block;
        font-size: 1.6rem;
        transition: color 0.4s cubic-bezier(0.4, 0, 0.2, 1),
          transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }
      .social-link i {
        vertical-align: middle;
        display: block;
      }
      .social-link:hover {
        color: var(--accent-color);
        transform: scale(1.1) translateY(-3px);
      }

      /* --- Theme Toggle Button --- */
      .theme-toggle {
        position: fixed;
        top: 20px;
        right: 25px;
        background-color: var(--button-bg);
        color: var(--icon-color);
        border: 1px solid var(--button-border);
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 1.1rem;
        cursor: pointer;
        box-shadow: 0 2px 5px var(--button-shadow);
        z-index: 100;
        transition: background-color var(--theme-transition-duration) ease,
          color var(--theme-transition-duration) ease,
          border-color var(--theme-transition-duration) ease,
          box-shadow 0.3s ease, transform 0.3s ease;
        opacity: 0;
        animation: fadeInToggle 0.5s ease-out forwards;
        animation-delay: 1.5s;
      }
      @keyframes fadeInToggle {
        to {
          opacity: 1;
        }
      }
      .theme-toggle:hover {
        background-color: var(--button-hover-bg);
        color: var(--icon-hover-color);
        transform: scale(1.1);
        box-shadow: 0 4px 10px var(--button-shadow);
      }
      .theme-toggle .fa-sun {
        display: none;
      }
      html.light-mode .theme-toggle .fa-sun {
        display: inline-block;
      }
      html.light-mode .theme-toggle .fa-moon {
        display: none;
      }

      /* --- Now Playing Indicator --- */
      #now-playing {
        position: fixed;
        bottom: 15px;
        left: 20px;
        background-color: var(--now-playing-bg);
        color: var(--text-muted-color);
        border: 1px solid var(--now-playing-border);
        border-radius: 8px;
        padding: 8px 12px;
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 0.8rem;
        box-shadow: 0 3px 8px var(--now-playing-shadow);
        backdrop-filter: blur(5px);
        z-index: 100;
        max-width: 250px;
        opacity: 0;
        transform: translateY(10px);
        transition: opacity 0.5s ease, transform 0.5s ease,
          background-color var(--theme-transition-duration) ease,
          color var(--theme-transition-duration) ease,
          border-color var(--theme-transition-duration) ease,
          box-shadow var(--theme-transition-duration) ease;
        pointer-events: none;
      }
      #now-playing.visible {
        opacity: 1;
        transform: translateY(0);
      }
      #now-playing i {
        font-size: 0.9em;
        margin-right: 2px;
        color: var(--icon-color);
        transition: color var(--theme-transition-duration) ease;
      } /* Theme transition for icon */
      #now-playing-text {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      #now-playing-text strong {
        color: var(--text-color);
        font-weight: 600;
        transition: color var(--theme-transition-duration) ease;
      }

      /* --- Footer --- */
      footer {
        position: fixed;
        bottom: 10px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 0.8rem;
        color: var(--text-muted-color);
        z-index: 1;
        padding: 5px 12px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        gap: 5px;
        transition: color var(--theme-transition-duration) ease;
      }
      footer .separator {
        color: var(--text-muted-color);
        opacity: 0.5;
        margin: 0 3px;
      }

      /* --- Responsive Design --- */
      @media (max-width: 768px) {
        h1 {
          font-size: 2.2rem;
        }
        h2.section-title {
          font-size: 1.3rem;
          margin-top: 30px;
        }
        p.intro {
          font-size: 1rem;
        }
        .link-section {
          gap: 15px;
        }
        .nav-item {
          padding: 12px 20px;
          font-size: 0.9rem;
          border-radius: 8px;
        }
        .nav-item:hover {
          transform: translateY(-2px) scale(1.01);
        }
        .nav-item:hover::before {
          display: none;
        }
        .nav-item:hover i {
          transform: scale(1.05) rotate(0deg);
        }
        .nav-item:active {
          transform: translateY(0);
        }

        .container {
          width: 92%;
          padding: 25px;
          margin: 20px 0;
          max-height: 85vh;
        }
        .socials {
          gap: 25px;
        }
        .social-link {
          font-size: 1.4rem;
        }
        .social-link:hover {
          transform: scale(1.1) translateY(-2px);
        }
        footer {
          font-size: 0.75rem;
          gap: 4px;
          padding: 4px 10px;
        }
        .theme-toggle {
          top: 15px;
          right: 15px;
          width: 36px;
          height: 36px;
          font-size: 1rem;
        }
        #now-playing {
          left: 15px;
          bottom: 10px;
          padding: 6px 10px;
          font-size: 0.75rem;
          max-width: 200px;
        }
      }
      @media (max-width: 480px) {
        h1 {
          font-size: 1.9rem;
        }
        h2.section-title {
          font-size: 1.2rem;
        }
        p.intro {
          font-size: 0.9rem;
          line-height: 1.6;
        }
        .link-section {
          flex-direction: column;
          align-items: center;
          gap: 12px;
        }
        .nav-item {
          width: 85%;
          text-align: center;
          justify-content: center;
        }
        .container {
          width: 95%;
          margin: 15px 0;
          padding: 20px;
          max-height: 80vh;
        }
        .socials {
          gap: 22px;
        }
        .social-link {
          font-size: 1.3rem;
        }
        footer {
          flex-direction: row;
          flex-wrap: wrap;
          justify-content: center;
          gap: 5px 10px;
          width: 90%;
          padding: 5px 8px;
        }
        footer .separator {
          display: none;
        }
        .theme-toggle {
          top: 10px;
          right: 10px;
          width: 34px;
          height: 34px;
          font-size: 0.9rem;
        }
        #now-playing {
          left: 10px;
          bottom: 10px;
          padding: 5px 8px;
          font-size: 0.7rem;
          max-width: 180px;
          gap: 5px;
        }
      }
    </style>
  </head>
  <body>
    <canvas id="particle-canvas"></canvas>

    <!-- Theme Toggle Button -->
    <button
      id="theme-toggle-button"
      class="theme-toggle"
      title="Toggle theme"
      aria-label="Toggle theme"
    >
      <i class="fas fa-moon"></i><i class="fas fa-sun"></i>
    </button>

    <!-- Now Playing Indicator -->
    <div id="now-playing" aria-live="polite">
      <i class="fa-brands fa-spotify"></i>
      <!-- Default icon -->
      <span id="now-playing-text">Loading music...</span>
    </div>

    <div class="container">
      <h1>Prashant Giri</h1>
      <p class="intro">
        Welcome to my corner of the internet. Explore my work, thoughts, and
        projects, and feel free to get in touch.
      </p>

      <!-- Section 1: Explore -->
      <section>
        <h2 class="section-title">Explore</h2>
        <nav class="link-section">
          <a
            href="https://knowledgebase.prashantgiri360.com.np"
            target="_blank"
            class="nav-item"
          >
            <i class="fa-solid fa-book-open"></i> <span>Knowledge Base</span>
          </a>
          <a
            href="https://blog.prashantgiri360.com.np"
            target="_blank"
            class="nav-item"
          >
            <i class="fa-solid fa-newspaper"></i> <span>Blog</span>
          </a>
          <a
            href="https://portfolio.prashantgiri360.com.np"
            target="_blank"
            class="nav-item"
          >
            <i class="fa-solid fa-briefcase"></i> <span>Portfolio</span>
          </a>
          <a
            href="mailto:contact@prashantgiri360.com.np?subject=Inquiry%20from%20prashantgiri360.com.np&body=Hello%20Prashant%2C%0A%0A..."
            class="nav-item resume-button"
          >
            <i class="fa-solid fa-file-lines"></i> <span>Request Resume</span>
          </a>
        </nav>
      </section>

      <!-- Section 2: Projects & Tools -->
      <section>
        <h2 class="section-title">Projects & Tools</h2>
        <div class="link-section">
          <a
            href="https://disalert.prashantgiri360.com.np"
            target="_blank"
            class="nav-item"
          >
            <i class="fa-solid fa-bell"></i> <span>DisAlert</span>
          </a>
          <a
            href="https://home.prashantgiri360.com.np"
            target="_blank"
            class="nav-item"
          >
            <i class="fa-solid fa-house-laptop"></i> <span>Homepage</span>
          </a>
        </div>
      </section>

      <!-- Social Media Links -->
      <div class="socials">
        <a
          href="https://socials.prashantgiri360.com.np/github"
          target="_blank"
          class="social-link"
          title="GitHub"
          ><i class="fab fa-github"></i
        ></a>
        <a
          href="https://socials.prashantgiri360.com.np/instagram"
          target="_blank"
          class="social-link"
          title="Instagram"
          ><i class="fab fa-instagram"></i
        ></a>
        <a
          href="https://socials.prashantgiri360.com.np/discord"
          target="_blank"
          class="social-link"
          title="Discord"
          ><i class="fab fa-discord"></i
        ></a>
        <a
          href="https://socials.prashantgiri360.com.np/email"
          target="_blank"
          class="social-link"
          title="Email"
          ><i class="fas fa-envelope"></i
        ></a>
        <a
          href="https://socials.prashantgiri360.com.np/linkedin"
          target="_blank"
          class="social-link"
          title="LinkedIn"
          ><i class="fab fa-linkedin-in"></i
        ></a>
      </div>
    </div>

    <!-- Footer -->
    <footer>
      <span>© <span id="year"></span> Prashant Giri</span>
      <span class="separator">|</span>
      <span>All rights reserved</span>
    </footer>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // --- Dynamic Year ---
        document.getElementById("year").textContent = new Date().getFullYear();

        // --- Theme Toggle Functionality --- (Identical)
        const themeToggleButton = document.getElementById(
            "theme-toggle-button"
          ),
          htmlElement = document.documentElement;
        const applyTheme = (theme) => {
          htmlElement.classList.toggle("light-mode", theme === "light");
          const lightMeta = document.querySelector(
              'meta[media="(prefers-color-scheme: light)"]'
            ),
            darkMeta = document.querySelector(
              'meta[media="(prefers-color-scheme: dark)"]'
            );
          if (lightMeta && darkMeta) {
            const metaThemeColor = document.querySelector(
              'meta[name="theme-color"]'
            );
            metaThemeColor.setAttribute(
              "content",
              theme === "light" ? lightMeta.content : darkMeta.content
            );
          }
        };
        const savedTheme = localStorage.getItem("theme"),
          prefersDark = window.matchMedia(
            "(prefers-color-scheme: dark)"
          ).matches;
        let currentTheme = savedTheme
          ? savedTheme
          : prefersDark
          ? "dark"
          : "light";
        applyTheme(currentTheme);
        themeToggleButton.addEventListener("click", () => {
          currentTheme = htmlElement.classList.contains("light-mode")
            ? "dark"
            : "light";
          applyTheme(currentTheme);
          localStorage.setItem("theme", currentTheme);
        });

        // --- Last.fm Now Playing (Using Official API) ---
        const lastFmUsername = "llyr4472"; // <<< REPLACE WITH YOUR LAST.FM USERNAME
        const lastFmApiKey = "bfbe12109a892eee37fa74a369f0bd00"; // <<< REPLACE WITH YOUR LAST.FM API KEY
        const nowPlayingElement = document.getElementById("now-playing");
        const nowPlayingTextElement =
          document.getElementById("now-playing-text");
        const nowPlayingIconElement = nowPlayingElement?.querySelector("i");

        async function fetchNowPlaying() {
          if (
            !lastFmUsername ||
            !lastFmApiKey ||
            lastFmUsername === "YOUR_USERNAME" ||
            lastFmApiKey === "YOUR_API_KEY"
          ) {
            console.warn("Last.fm username or API key not set.");
            if (nowPlayingElement)
              nowPlayingElement.classList.remove("visible");
            return;
          }

          // Construct the official API URL
          const apiUrl = `https://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=${lastFmUsername}&api_key=${lastFmApiKey}&format=json&limit=1`;
          let displayData = null;

          try {
            const response = await fetch(apiUrl, { cache: "no-store" });
            if (!response.ok) {
              // Attempt to read error message from Last.fm if available
              let errorDetails = `HTTP error! Status: ${response.status}`;
              try {
                const errorData = await response.json();
                if (errorData && errorData.message) {
                  errorDetails += ` - ${errorData.message}`;
                }
              } catch (e) {
                /* Ignore if parsing error fails */
              }
              throw new Error(errorDetails);
            }
            const data = await response.json();

            // Check if recenttracks and track array exist
            if (
              data.recenttracks &&
              data.recenttracks.track &&
              data.recenttracks.track.length > 0
            ) {
              const track = data.recenttracks.track[0]; // Get the most recent track

              // Check if track is currently playing
              const isNowPlaying =
                track["@attr"] && track["@attr"].nowplaying === "true";

              if (
                isNowPlaying &&
                track.name &&
                track.artist &&
                track.artist["#text"]
              ) {
                displayData = `Listening to <strong>${track.name}</strong> by ${track.artist["#text"]}`;
                if (nowPlayingIconElement) {
                  nowPlayingIconElement.className = "fa-brands fa-spotify"; // Or other logic based on source if available
                }
              }
              // Optional: Show last played if NOT currently playing
              // else if (!isNowPlaying && track.name && track.artist && track.artist["#text"]) {
              //           displayData = `Last: <strong>${track.name}</strong> by ${track.artist["#text"]}`;
              //            if (nowPlayingIconElement) nowPlayingIconElement.className = "fa-solid fa-music";
              //       }
            }
          } catch (error) {
            console.error("Error fetching Last.fm data:", error);
            displayData = null;
          }

          // Update DOM
          if (displayData && nowPlayingTextElement && nowPlayingElement) {
            nowPlayingTextElement.innerHTML = displayData;
            nowPlayingElement.classList.add("visible");
          } else if (nowPlayingElement) {
            nowPlayingElement.classList.remove("visible");
          }
        }

        // Fetch initial data and set interval
        fetchNowPlaying();
        setInterval(fetchNowPlaying, 30000); // Refresh every 30 seconds

        // --- Staggered Animation for Nav Items --- (Identical)
        const linkSections = document.querySelectorAll(".link-section"),
          baseDelay = 1,
          staggerAmount = 0.08;
        linkSections.forEach((section) => {
          const items = section.querySelectorAll(".nav-item");
          items.forEach((item, index) => {
            item.style.animationDelay = `${baseDelay + index * staggerAmount}s`;
          });
        });

        // --- Interactive Particle Canvas --- (Identical Code)
        const canvas = document.getElementById("particle-canvas"),
          ctx = canvas.getContext("2d");
        let particles = [],
          canvasWidth,
          canvasHeight;
        const mouse = { x: null, y: null, radius: 100 };
        function resizeCanvas() {
          canvasWidth = canvas.width = window.innerWidth;
          canvasHeight = canvas.height = window.innerHeight;
          mouse.radius = Math.min(canvasWidth, canvasHeight) / 7.5;
          initParticles();
        }
        window.addEventListener("resize", resizeCanvas);
        window.addEventListener("mousemove", (event) => {
          mouse.x = event.clientX;
          mouse.y = event.clientY;
        });
        window.addEventListener("mouseout", () => {
          mouse.x = null;
          mouse.y = null;
        });
        canvas.addEventListener("click", (event) => {
          const clickX = event.clientX,
            clickY = event.clientY,
            pulseRadius = mouse.radius * 1.7;
          particles.forEach((p) => {
            const dx = clickX - p.x,
              dy = clickY - p.y,
              distance = Math.sqrt(dx * dx + dy * dy);
            if (distance < pulseRadius) {
              const angle = Math.atan2(dy, dx),
                force = (1 - distance / pulseRadius) * 0.8;
              p.vx += Math.cos(angle) * force * 5;
              p.vy += Math.sin(angle) * force * 5;
              p.pulse = 0.85;
            }
          });
        });
        class Particle {
          constructor() {
            this.x = Math.random() * canvasWidth;
            this.y = Math.random() * canvasHeight;
            this.size = Math.random() * 2.8 + 1.2;
            this.baseSize = this.size;
            this.vx = (Math.random() - 0.5) * 0.8;
            this.vy = (Math.random() - 0.5) * 0.8;
            this.baseHue = 270;
            this.baseSaturation = 80;
            this.baseLightness = 78;
            this.baseAlpha = Math.random() * 0.6 + 0.3;
            this.alpha = this.baseAlpha;
            this.lightness = this.baseLightness;
            this.pulse = 0;
            this.maxPulseEffect = 6;
            this.pulseDecay = 0.03;
          }
          update() {
            const dxMouse = mouse.x - this.x,
              dyMouse = mouse.y - this.y,
              distanceMouse =
                mouse.x === null
                  ? Infinity
                  : Math.sqrt(dxMouse * dxMouse + dyMouse * dyMouse),
              maxInteractionDistance = mouse.radius;
            let targetSize = this.baseSize,
              targetAlpha = this.baseAlpha,
              targetLightness = this.baseLightness,
              pushForceX = 0,
              pushForceY = 0;
            if (distanceMouse < maxInteractionDistance) {
              const proximity = 1 - distanceMouse / maxInteractionDistance;
              targetSize = this.baseSize + proximity * 3.5;
              targetAlpha = Math.min(this.baseAlpha + proximity * 0.7, 0.98);
              targetLightness = Math.min(
                this.baseLightness + proximity * 20,
                95
              );
              const pushStrength = proximity * 0.05,
                angle = Math.atan2(dyMouse, dxMouse);
              pushForceX = -Math.cos(angle) * pushStrength;
              pushForceY = -Math.sin(angle) * pushStrength;
            }
            if (this.pulse > 0) {
              const pulseFactor = this.pulse;
              targetSize += pulseFactor * this.maxPulseEffect;
              targetAlpha = Math.min(targetAlpha + pulseFactor * 0.8, 1);
              targetLightness = Math.min(
                targetLightness + pulseFactor * 25,
                98
              );
              this.pulse -= this.pulseDecay;
              if (this.pulse < 0) this.pulse = 0;
            }
            const lerpFactor = 0.12;
            this.size += (targetSize - this.size) * lerpFactor;
            this.alpha += (targetAlpha - this.alpha) * lerpFactor;
            this.lightness += (targetLightness - this.lightness) * lerpFactor;
            this.vx += pushForceX;
            this.vy += pushForceY;
            this.vx *= 0.965;
            this.vy *= 0.965;
            this.x += this.vx;
            this.y += this.vy;
            if (this.x < -this.size) this.x = canvasWidth + this.size;
            else if (this.x > canvasWidth + this.size) this.x = -this.size;
            if (this.y < -this.size) this.y = canvasHeight + this.size;
            else if (this.y > canvasHeight + this.size) this.y = -this.size;
          }
          draw(ctx) {
            ctx.beginPath();
            ctx.arc(this.x, this.y, Math.max(0, this.size), 0, Math.PI * 2);
            ctx.fillStyle = `hsla(${this.baseHue}, ${this.baseSaturation}%, ${this.lightness}%, ${this.alpha})`;
            ctx.fill();
          }
        }
        function initParticles() {
          particles = [];
          const particleDensityFactor = 19e3,
            numParticles = Math.floor(
              (canvasWidth * canvasHeight) / particleDensityFactor
            ),
            minParticles = 70,
            maxParticles = 300,
            count = Math.max(
              minParticles,
              Math.min(maxParticles, numParticles)
            );
          for (let i = 0; i < count; i++) {
            particles.push(new Particle());
          }
        }
        function connectParticles() {
          const maxConnectionDist = 120,
            maxCursorDist = mouse.radius * 1.5;
          ctx.lineWidth = 0.8;
          for (let a = 0; a < particles.length; a++) {
            for (let b = a + 1; b < particles.length; b++) {
              const dx = particles[a].x - particles[b].x,
                dy = particles[a].y - particles[b].y,
                distance = Math.sqrt(dx * dx + dy * dy);
              if (distance < maxConnectionDist) {
                const opacity =
                  (1 - distance / maxConnectionDist) *
                  Math.min(particles[a].alpha, particles[b].alpha) *
                  0.8;
                if (opacity > 0.04) {
                  ctx.strokeStyle = `hsla(${particles[a].baseHue}, ${
                    particles[a].baseSaturation
                  }%, ${
                    (particles[a].lightness + particles[b].lightness) / 2 + 2
                  }%, ${opacity})`;
                  ctx.beginPath();
                  ctx.moveTo(particles[a].x, particles[a].y);
                  ctx.lineTo(particles[b].x, particles[b].y);
                  ctx.stroke();
                }
              }
            }
            if (mouse.x !== null) {
              const dxMouse = particles[a].x - mouse.x,
                dyMouse = particles[a].y - mouse.y,
                distanceMouse = Math.sqrt(
                  dxMouse * dxMouse + dyMouse * dyMouse
                );
              if (distanceMouse < maxCursorDist) {
                const opacity =
                  (1 - distanceMouse / maxCursorDist) * particles[a].alpha * 1;
                if (opacity > 0.07) {
                  ctx.lineWidth = 1;
                  ctx.strokeStyle = `hsla(${particles[a].baseHue}, ${
                    particles[a].baseSaturation + 12
                  }%, ${particles[a].lightness + 8}%, ${opacity})`;
                  ctx.beginPath();
                  ctx.moveTo(particles[a].x, particles[a].y);
                  ctx.lineTo(mouse.x, mouse.y);
                  ctx.stroke();
                  ctx.lineWidth = 0.8;
                }
              }
            }
          }
        }
        function animate(currentTime) {
          ctx.clearRect(0, 0, canvasWidth, canvasHeight);
          particles.forEach((particle) => {
            particle.update();
            particle.draw(ctx);
          });
          connectParticles();
          requestAnimationFrame(animate);
        }
        resizeCanvas();
        animate(0);
      });
    </script>
  </body>
</html>
